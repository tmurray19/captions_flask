<!DOCTYPE html>
<html>
<head>
  <script type=text/javascript src="{{ url_for('static', filename='jquery-3.4.1.min.js') }}"></script>
  <script type=text/javascript>$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};</script>
</head>
<body>

<div>
<img src="{{ url_for('static', filename=frame_loc) }}" id='image' onclick="showCoords(event)" ismap></img>
</div>

<p>Project ID: <span id="proj_id">{{ proj_id }}</span></p>
<p>Video ID: <span id="vid_id">{{ vid_id }}</span></p>
<p>Click where you want the top left corner of the caption to be on the frame above. You can preview the captions in the video at the end</p>

<p id="x-coords">X Co-ordinates: <span id="x"></span></p>
<p id="y-coords">Y Co-ordinates: <span id="y"></span></p>


<script>
function showCoords(event) {
  var x = event.clientX;
  var y = event.clientY;
  var xCoords = (x-7); 
  var yCoords = (y-7);
  document.getElementById("x").innerHTML = xCoords;
  document.getElementById("y").innerHTML = yCoords;
}
</script>

<script type=text/javascript>
d = new Date();
$(function() {
  $('#image').bind('click', function() {
    $.getJSON($SCRIPT_ROOT + '/_render_caption', {
      x: $('#x').val(),
      y: $('#y').val(),
      proj_id: $('#proj_id').val(),
      vid_id: $('vid_id').val()
    }, function(data) {
      $('#image').attr("src", data.image_status);
    });
  });
});
</script>


</body>
</html>
